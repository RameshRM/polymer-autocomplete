/*! typewriter 20-05-2014 */
(function(a){"use strict";function b(a){var b,c={};for(var d in a)a.hasOwnProperty(d)&&(b=a[d],c[b]=d);return c}function c(a){var b=a.attributes.id.value,c=a.className||"";return{id:b,"class":c}}function d(a,b){a.attachEvent?a.attachEvent(b,function(a){e(a)}):a[b]=function(a){e(a)}}function e(a){g(a.keyCode)||f(a)}function f(a){return a.cancel=!0,a.returnValue=!1,a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),!1}function g(){return!0}function h(a,b){var c=new CustomEvent("kbEvent",{detail:{target:a.target,keyCode:a.keyCode,type:a.keyMap+"_"+a.state,eventArgs:a}});b.call(this,c.detail)}var i=null,j=function(){this.selectors={},this.listeners=[],this.registerListeners=function(a,b,d){var e=b;this.listeners.push({selector:c(a),keyCode:e,callback:d}),this.keyMapListeners={9:[],13:[],16:[],39:[],38:[]},"undefined"!=typeof this.keyMapListeners[e]&&this.keyMapListeners[e].push({ctx:a,callback:d})},this.keyMapDefs={Right:39,Enter:13,Shift:16,Tab:9,Control:17},this.keyHandlers={},this.keyBoardStates={UP:"UP",DOWN:"DOWN"},this.keymaps={9:"Tab",13:"Enter",17:"Control",16:"Shift",27:"Esc",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",46:"Delete"},this.keyMapDefs=b(this.keymaps),this.wireupKeyBindings(this.keymaps,this.keyMapDefs)};return j.prototype={subscribers:{},wireupKeyBindings:function(a){var b=this;d(document.body,"onkeydown"),d(document.body,"onkeyup"),this.subscribers={};b.onKeyBoard(b.keyBoardStates.UP,document.body,a,function(a){if(b.subscribers.hasOwnProperty(a.keyCode)){var c=b.subscribers[a.keyCode];c.call(b,a)}})},on:function(a,b,c){var d=(this[a.keyMap],a.state||"up",a.keyMap);"undefined"!=typeof d&&(this.subscribers[d]=function(){c.call(this,b)})},offKeyBoard:function(a){var b="onkeyup";"undefined"!=typeof a&&null!=a&&null!=a[b]&&(a[b]=null)},onKeyBoard:function(a,b,c,d){var e=a===this.keyBoardStates.UP?"onkeyup":"onkeydown";b.attachEvent?b.attachEvent(e,function(a){h({keyMap:i.keymaps[a.keyCode],keyCode:a.keyCode,target:a.target,state:"keyup"},d)}):b[e]=function(a){h({keyMap:i.keymaps[a.keyCode],keyCode:a.keyCode,target:a.target,state:"keyup"},d)}}},null===i&&(i=new j),a.typewriter=i,i}).call(this,window);